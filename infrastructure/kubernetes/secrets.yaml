# This file demonstrates how secrets should be stored in Kubernetes
# DO NOT commit actual secrets to version control
# Use external secret management systems like:
# - Google Secret Manager
# - AWS Secrets Manager
# - HashiCorp Vault
# - Sealed Secrets

apiVersion: v1
kind: Secret
metadata:
  name: app-secrets
  namespace: production
type: Opaque
stringData:
  # Database credentials - should be injected from external source
  DATABASE_URL: "postgresql://user:password@postgres.default.svc.cluster.local:5432/ai_company_db"
  DATABASE_PASSWORD: "PLACEHOLDER_PASSWORD"

  # Redis credentials
  REDIS_URL: "redis://:password@redis.default.svc.cluster.local:6379"
  REDIS_PASSWORD: "PLACEHOLDER_PASSWORD"

  # Authentication
  JWT_SECRET: "PLACEHOLDER_JWT_SECRET"
  SESSION_SECRET: "PLACEHOLDER_SESSION_SECRET"
  ENCRYPTION_KEY: "PLACEHOLDER_ENCRYPTION_KEY"

---
apiVersion: v1
kind: Secret
metadata:
  name: external-api-keys
  namespace: production
type: Opaque
stringData:
  OPENAI_API_KEY: "sk-placeholder-key"
  ANTHROPIC_API_KEY: "sk-ant-placeholder-key"
  GOOGLE_API_KEY: "placeholder-google-key"
  GITHUB_TOKEN: "ghp-placeholder-token"

---
apiVersion: v1
kind: Secret
metadata:
  name: docker-registry
  namespace: production
type: kubernetes.io/dockercfg
data:
  .dockercfg: |
    {
      "auths": {
        "gcr.io": {
          "auth": "PLACEHOLDER_BASE64_ENCODED_CREDENTIALS"
        }
      }
    }

---
# Example of using External Secrets Operator to sync from Google Secret Manager
apiVersion: external-secrets.io/v1beta1
kind: SecretStore
metadata:
  name: gcpsm-secret-store
  namespace: production
spec:
  provider:
    gcpsm:
      projectID: "your-gcp-project-id"
      auth:
        workloadIdentity:
          clusterLocation: us-central1
          clusterName: ai-company-gke-prod
          serviceAccountRef:
            name: external-secrets-sa

---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: app-secrets-from-gcp
  namespace: production
spec:
  refreshInterval: 1h
  secretStoreRef:
    name: gcpsm-secret-store
    kind: SecretStore
  target:
    name: app-secrets
    creationPolicy: Owner
    template:
      metadata:
        labels:
          app: ai-company-platform
  data:
    - secretKey: DATABASE_PASSWORD
      remoteRef:
        key: database-password
    - secretKey: JWT_SECRET
      remoteRef:
        key: jwt-secret
    - secretKey: OPENAI_API_KEY
      remoteRef:
        key: openai-api-key

---
# TLS Certificate Secret (for HTTPS)
apiVersion: v1
kind: Secret
metadata:
  name: tls-secret
  namespace: production
type: kubernetes.io/tls
data:
  tls.crt: PLACEHOLDER_BASE64_CERT
  tls.key: PLACEHOLDER_BASE64_KEY

---
# ConfigMap for non-sensitive configuration
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
  namespace: production
data:
  NODE_ENV: "production"
  LOG_LEVEL: "info"
  ENABLE_DEBUG_MODE: "false"
  ENABLE_ANALYTICS: "true"
  API_BASE_URL: "https://api.aicompany.com"
  FRONTEND_URL: "https://app.aicompany.com"
  CORS_ORIGIN: "https://app.aicompany.com"

---
# ConfigMap for non-sensitive configuration (staging)
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
  namespace: staging
data:
  NODE_ENV: "staging"
  LOG_LEVEL: "debug"
  ENABLE_DEBUG_MODE: "false"
  ENABLE_ANALYTICS: "true"
  API_BASE_URL: "https://api-staging.aicompany.com"
  FRONTEND_URL: "https://app-staging.aicompany.com"
  CORS_ORIGIN: "https://app-staging.aicompany.com"
